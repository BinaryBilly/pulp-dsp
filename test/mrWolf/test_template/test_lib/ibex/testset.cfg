arguments = []

class argument(object):
	"""docstring for argument"""
	def __init__(self, name, a_type, length):
		super(argument, self).__init__()
		self.name = name
		self.type = a_type
		self.length = length


def add_arg(name, type, length):
	arguments.append(argument(name, 'int', 1))

###############################################################
# 
# Function Defines Below this
# 
###############################################################

FNAME = 'plp_dot_prod_i32'

add_arg('v_a', 'int',12)
add_arg('v_b', 'int',12)
add_arg('12', 'int',1)
add_arg('comp_result','int',1)

###############################################################
# 
# Do not change below this line
# 
###############################################################

FSIG = ''
for arg in arguments:
	if FSIG == '':
		FSIG = arg.name
	else:
		FSIG = FSIG + ', ' + arg.name

FSIG = FNAME + '(' + FSIG + ')'

print(FSIG)

from plptest import *

TestConfig = c = {}

c['tests'] = [ ]

def check_output(config, output):
	
	for item in output.split('\n'):
		if 'Test passed:' in item:
			print(item)
		elif 'Total cycles:' in item:
			print(item)
		elif 'Instructions:' in item:
			print(item)
		elif 'comp_result:' in item:
			print(item)

	# if output.find('Hello !') == -1:
		# return (False, "Didn't find output string")
	return (True, None)

def add_test(name,flags):
	return Test(
		name = 'test %s' % name,
		commands = [
			Shell('clean', 'make clean %s' % (flags)),
			Shell('gen', 'make gen %s' % (flags)),
			Shell('build', 'make all %s' % (flags)),
			Shell('run', 'make run %s' % (flags)),
			Check('check', check_output)
		],
		timeout = 1000000
	)

FSIG = 'FSIG=\'-D FSIG=\"' + FSIG + '\"\''

GARGS = 'GARGS=\' --arg v_a int 12 --arg v_b int 12 \''

FLAGS = FSIG + ' ' + GARGS

c['tests'].append(add_test('dot_prod', FLAGS))